<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Entre em contato com a Multi Loja Eletro. Tire suas dúvidas sobre eletrônicos e eletrodomésticos. Atendimento especializado em São Paulo.">
    <meta name="keywords" content="contato, multi loja eletro, atendimento, dúvidas, eletrônicos, são paulo">
    <meta name="author" content="Multi Loja Eletro">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mlojaeletro.com.br/contact.html">
    <meta property="og:title" content="Contato - Multi Loja Eletro">
    <meta property="og:description" content="Entre em contato conosco. Atendimento especializado em eletrônicos.">
    <meta property="og:image" content="https://mlojaeletro.com.br/img/logotipo.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="img/favicon.png">
    
    <title>Contato - Multi Loja Eletro</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9DBDFTBR6Q"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-9DBDFTBR6Q');
    </script>
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            emailjs.init("mxNipH75gt76PFDas"); // chave pública do EmailJS
        })();
    </script>
    
    <!-- Google reCAPTCHA -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
          <a href="index.html"><img src="img/logotipo.png" alt="Multi Loja Eletro" /></a>
        </div>
        <nav>
          <ul>
            <li><a href="index.html">Início</a></li>
            <li><a href="about.html">Sobre Nós</a></li>
            <li><a href="products.html">Produtos</a></li>
            <li><a href="contact.html">Contato</a></li>
          </ul>
        </nav>
    </header>

    <!-- Contact form section -->
    <section id="contact-form" class="section">
        <h2>Envie-nos uma Mensagem</h2>
        <p>Tem alguma dúvida ou precisa de assistência? Preencha o formulário abaixo e entraremos em contato o mais breve possível.</p>
        
        <form id="contactForm" onsubmit="return submitForm(event)">
            
            <!-- Name field -->
            <div class="form-group">
                <label for="name">Nome Completo: *</label>
                <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    placeholder="Digite seu nome completo"
                    required
                >
                <span id="nameError" class="error-message"></span>
            </div>

            <!-- Phone field -->
            <div class="form-group">
                <label for="phone">Número de Telefone: *</label>
                <input 
                    type="tel"
                    id="phone" 
                    name="phone" 
                    placeholder="Digite seu telefone (9 ou 10 dígitos)"
                    required
                >
                <span id="phoneError" class="error-message"></span>
            </div>

            <!-- Email field -->
            <div class="form-group">
                <label for="email">Endereço de E-mail: *</label>
                <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    placeholder="Digite seu endereço de e-mail"
                    required
                >
                <span id="emailError" class="error-message"></span>
            </div>

            <!-- Message field -->
            <div class="form-group">
                <label for="query">Mensagem: *</label>
                <textarea 
                    id="query" 
                    name="query" 
                    rows="5" 
                    placeholder="Por favor, descreva sua dúvida ou pergunta"
                    required
                ></textarea>
                <span id="queryError" class="error-message"></span>
            </div>

            <!-- Google reCAPTCHA -->
            <div class="form-group">
                <div class="g-recaptcha" data-sitekey="6LcN9fcrAAAAAGV2SRqQAxii2eYwYGMS1az2RMiP"></div>
                <span id="recaptchaError" class="error-message"></span>
            </div>

            <!-- Submit button -->
            <button type="submit" class="submit-btn" id="submitBtn">Enviar Mensagem</button>
            
            <!-- Success message -->
            <div id="successMessage" class="success-message"></div>
        </form>
    </section>

    <!-- Contact info -->
    <section id="contact" class="section">
        <h2>Outras Formas de nos Contatar</h2>
        <p>Prefere entrar em contato diretamente? Você também pode nos encontrar através de:</p>
        <p><strong>E-mail:</strong> <a href="mailto:multilojaeletro@gmail.com">multilojaeletro@gmail.com</a></p>
        <p><strong>WhatsApp:</strong>
        <a href="https://api.whatsapp.com/send?phone=5511991215175&text=Ol%C3%A1%2C%20gostaria%20de%20saber%20mais%20sobre%20os%20produtos!" 
        target="_blank" 
        rel="noopener noreferrer"
        title="Entre em contato pelo WhatsApp">
        <img src="img/whatsapp.png" alt="WhatsApp" width="20"> (11) 99121-5175
        </a></p>
        <p><strong>Endereço:</strong> São Paulo - SP</p>
    </section>

    <!-- WhatsApp button -->
    <a href="https://api.whatsapp.com/send?phone=5511991215175&text=Ol%C3%A1%2C%20gostaria%20de%20saber%20mais%20sobre%20os%20produtos!" 
        class="whatsapp-float" 
        target="_blank" 
        rel="noopener noreferrer"
        title="Entre em contato pelo WhatsApp"
        aria-label="Contato via WhatsApp">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" width="50" height="50">
    </a>

    <footer>
        <p>&copy; 2025 Multi Loja Eletro. Todos os direitos reservados.</p>
    </footer>

    <!-- Form validation and EmailJS integration -->
    <script>
        function submitForm(event) {
            event.preventDefault();
            
            // Clear previous errors
            clearErrors();
            
            // Get form values
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            const query = document.getElementById('query').value.trim();
            
            let isValid = true;
            
            // Validate name
            if (!validateName(name)) {
                isValid = false;
            }
            
            // Validate phone
            if (!validatePhone(phone)) {
                isValid = false;
            }
            
            // Validate email
            if (!validateEmail(email)) {
                isValid = false;
            }
            
            // Validate message
            if (!validateQuery(query)) {
                isValid = false;
            }
            
            // Validate reCAPTCHA (temporario, apenas para teste local)
            const recaptchaResponse = grecaptcha.getResponse();
            if (recaptchaResponse.length === 0) {
                showError('recaptchaError', 'Por favor, confirme que você não é um robô.');
                isValid = false;
            }
            
            // If all validations pass, send email
            if (isValid) {
                sendEmail(name, phone, email, query);
            }
            
            return false;
        }

        function sendEmail(name, phone, email, query) {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Enviando...';
            
            // EmailJS parameters
            const templateParams = {
                from_name: name,
                from_phone: phone,
                from_email: email,
                message: query,
                to_email: 'multilojaeletro@gmail.com'
            };
            
            // Send email using EmailJS
            emailjs.send('service_uzbicg6', 'template_ijiuss1', templateParams)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    showSuccessMessage();
                    document.getElementById('contactForm').reset();
                    grecaptcha.reset();
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Enviar Mensagem';
                    
                    // Track conversion in Google Analytics
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'form_submission', {
                            'event_category': 'Contact',
                            'event_label': 'Contact Form'
                        });
                    }
                }, function(error) {
                    console.log('FAILED...', error);
                    showError('queryError', 'Erro ao enviar mensagem. Por favor, tente novamente ou entre em contato pelo WhatsApp.');
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Enviar Mensagem';
                });
        }

        function validateName(name) {
            if (name === '') {
                showError('nameError', 'Por favor, digite seu nome.');
                return false;
            }
            
            const namePattern = /^[a-zA-ZÀ-ÿ\s']+$/;
            if (!namePattern.test(name)) {
                showError('nameError', 'O nome deve conter apenas letras e espaços.');
                return false;
            }
            
            return true;
        }

        function validatePhone(phone) {
            if (phone === '') {
                showError('phoneError', 'Por favor, digite seu número de telefone.');
                return false;
            }
            
            const phonePattern = /^[0-9]+$/;
            if (!phonePattern.test(phone)) {
                showError('phoneError', 'O número de telefone deve conter apenas dígitos.');
                return false;
            }
            
            if (phone.length < 9 || phone.length > 11) {
                showError('phoneError', 'O número de telefone deve ter entre 9 e 11 dígitos.');
                return false;
            }
            
            return true;
        }

        function validateEmail(email) {
            if (email === '') {
                showError('emailError', 'Por favor, digite seu endereço de e-mail.');
                return false;
            }
            return true;
        }

        function validateQuery(query) {
            if (query === '') {
                showError('queryError', 'Por favor, descreva sua consulta.');
                return false;
            }
            return true;
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        function clearErrors() {
            const errorMessages = document.querySelectorAll('.error-message');
            errorMessages.forEach(function(error) {
                error.textContent = '';
                error.style.display = 'none';
            });
            
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'none';
        }

        function showSuccessMessage() {
            const successMessage = document.getElementById('successMessage');
            successMessage.textContent = 'Obrigado pela sua mensagem! Entraremos em contato em breve.';
            successMessage.style.display = 'block';
            
            setTimeout(function() {
                successMessage.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>